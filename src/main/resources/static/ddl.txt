CREATE DATABASE IF NOT EXISTS `loan_advisor`;

CREATE TABLE IF NOT EXISTS `customers` (
  `CUSTOMER_ID` int NOT NULL,
  `FIRST_NAME` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  `LAST_NAME` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  `CITY` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL,
  `GENDER` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL,
  `EMAIL` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  `AGE` int NOT NULL,
  `PHONE_NO` varchar(10) DEFAULT NULL,
  `INCOME` int NOT NULL DEFAULT '0',
  `ADHAR_NO` varchar(12) NOT NULL,
  `PAN_NO` varchar(10) NOT NULL,
  `CREDIT_SCORE` int NOT NULL,
  `INITIAL_AMOUNT` int DEFAULT NULL,
  `LOAN_REQUIRE` int DEFAULT NULL,
  `STATUS` char(1) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  `CREATE_DTTM` timestamp NOT NULL,
  `CREATED_BY` int DEFAULT NULL,
  `UPDATE_DTTM` timestamp NULL DEFAULT NULL,
  `UPDATED_BY` int DEFAULT NULL,
  PRIMARY KEY (`CUSTOMER_ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

CREATE TABLE IF NOT EXISTS `loan` (
  `LOAN_ID` int NOT NULL AUTO_INCREMENT,
  `LOAN_TYPE` int DEFAULT NULL,
  `LOAN_DESC` varchar(1000) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL,
  `ROI` decimal(20,6) DEFAULT NULL,
  `STATUS` char(1) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  `CREATE_DTTM` timestamp NOT NULL,
  `CREATED_BY` int DEFAULT NULL,
  `UPDATE_DTTM` timestamp NULL DEFAULT NULL,
  `UPDATED_BY` int DEFAULT NULL,
  PRIMARY KEY (`LOAN_ID`),
  KEY `FK_loan_loan_type` (`LOAN_TYPE`),
  CONSTRAINT `FK_loan_loan_type` FOREIGN KEY (`LOAN_TYPE`) REFERENCES `loan_type` (`LOAN_TYPE_ID`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;


CREATE TABLE IF NOT EXISTS `loan_type` (
  `LOAN_TYPE_ID` int NOT NULL AUTO_INCREMENT,
  `LOAN_DESCRIPTION` varchar(100) DEFAULT NULL,
  `STATUS` char(1) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  `CREATE_DTTM` timestamp NOT NULL,
  `CREATED_BY` int DEFAULT NULL,
  `UPDATE_DTTM` timestamp NULL DEFAULT NULL,
  `UPDATED_BY` int DEFAULT NULL,
  PRIMARY KEY (`LOAN_TYPE_ID`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;


CREATE TABLE `sanction` (
	`SANCTION_ID` INT(10) NOT NULL,
	`CUSTOMER_ID` INT(10) NOT NULL,
	`LOAN_ID` INT(10) NOT NULL,
	`LOAN_AMOUNT` DECIMAL(18,2) NULL DEFAULT NULL,
	`ROI` DECIMAL(18,2) NULL DEFAULT NULL,
	`STATUS` CHAR(1) NOT NULL COLLATE 'utf8mb4_0900_ai_ci',
	`CREATE_DTTM` TIMESTAMP NOT NULL,
	`CREATED_BY` INT(10) NULL DEFAULT NULL,
	`UPDATE_DTTM` TIMESTAMP NULL DEFAULT NULL,
	`UPDATED_BY` INT(10) NULL DEFAULT NULL,
	PRIMARY KEY (`SANCTION_ID`) USING BTREE,
	INDEX `FK_sanction_customers` (`CUSTOMER_ID`) USING BTREE,
	INDEX `FK_sanction_loan` (`LOAN_ID`) USING BTREE,
	CONSTRAINT `FK_sanction_customers` FOREIGN KEY (`CUSTOMER_ID`) REFERENCES `loan_advisor`.`customers` (`CUSTOMER_ID`) ON UPDATE NO ACTION ON DELETE NO ACTION,
	CONSTRAINT `FK_sanction_loan` FOREIGN KEY (`LOAN_ID`) REFERENCES `loan_advisor`.`loan` (`LOAN_ID`) ON UPDATE NO ACTION ON DELETE NO ACTION
)
COLLATE='utf8mb4_0900_ai_ci'
ENGINE=InnoDB
;
